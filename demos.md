PSPGL demos
===========

Jeremy Fitzhardinge <[jeremy@goop.org](http://web.archive.org/web/20160505194813/mailto:jeremy@goop.org)\>

Download [pspgl-demos.zip](pspgl-demos.zip)

Demos written using PSPGL; See http://www.goop.org/psp/gl/ for details and source.

`vertexblend`: Vertex blending (skinning)
---------------------------------------

This demonstrates the PSPGL GL\_PSP\_vertex\_blend extension, which exposes the hardware's vertex blending capabilities. The extension is modelled on the ARB\_vertex\_blend extension, but is more finely tuned to the PSP's hardware. Porting code from one to the other should be straightforward.

Controls:

<table><tr><td>

**circle**

</td><td>stop rotation</td></tr><tr><td>

**triangle**

</td><td>draw normals (broken, but interestingly)</td></tr><tr><td>

**cross**

</td><td>quit</td></tr></table>

`bezier`: Curved surface demo
---------------------------

This shows the PSP's hardware surface patch drawing abilities, lit with diffuse and specular light from spotlights. The surface patch is generated by using the Firefox icon's green channel as a heightfield.

One interesting thing to note is that lighting isn't nearly as expensive with a Bezier patch as it is with plain triangle strips. The subdivision of the patches generates around 2300 vertices, but adding extra lights makes little difference. The "spot" demo uses a 64x64 mesh (4096) vertices, and 4 lights is a severe performance hit.

You can also draw spline patches by pushing "select" 3 times. The interesting thing to note with spline patches is that they're smooth over the whole control mesh. They're also more finely subdivided, so there are more triangles for the same subdivision setting.

Controls:

<table><tr><td>

**joystick**

</td><td>move camera</td></tr><tr><td>

**up/down**

</td><td>set light focus</td></tr><tr><td>

**left/right**

</td><td>set light cutoff angle</td></tr><tr><td>

**triangle**

</td><td>turn lights on and off</td></tr><tr><td>

**circle**

</td><td>start/stop spinning lights</td></tr><tr><td>

**square**

</td><td>stop camera drift</td></tr><tr><td>

**cross**

</td><td>switch render modes</td></tr><tr><td>

**select**

</td><td>select patch primitive (bezier tris/lines/points; spline tris/lines/points)
</td></tr><tr><td>

**start**

</td><td>quit</td></tr></table>

`spots`: Spotlight demo
---------------------

This shows the PSP's hardware lighting abilities. This is using a fairly fine mesh (64x64), and adding more lights clearly has a performance hit. The scale at the bottom of the screen is in milliseconds, and the green arrow indicates how long we spent waiting for the GE to finish processing. With 4 lights, it can only barely do 60fps, despite being fairly optimised (using indexed triangle strips cached in VRAM). Using a Bezier patch seems to be much more efficient.

Controls:

<table><tr><td>

**joystick**

</td><td>move camera</td></tr><tr><td>

**up/down**

</td><td>set light focus</td></tr><tr><td>

**left/right**

</td><td>set light cutoff angle</td></tr><tr><td>

**triangle**

</td><td>turn lights on and off</td></tr><tr><td>

**circle**

</td><td>start/stop spinning lights</td></tr><tr><td>

**square**

</td><td>stop camera drift</td></tr><tr><td>

**cross**

</td><td>quit</td></tr></table>

`copytex`: Magnifier demo
-----------------------

This demonstrates copying from the framebuffer into a texture and then using this texture for further drawing. The PSP has a high-performance copying unit which is synchronized with the rest of the graphics command queue, leading to a very efficient implementation of glCopyTexImage2D(). Controls:

<table><tr><td>

**circle**

</td><td>stop magnifiers moving while held</td></tr><tr><td>

**cross**

</td><td>quit</td></tr></table>

Jeremy Fitzhardinge [jeremy@goop.org](mailto:jeremy@goop.org)
